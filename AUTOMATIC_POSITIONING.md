# Автоматический расчет позиций горизонтальных линий

## Описание
Реализован автоматический расчет позиций для `.tree-horizontal-line` элементов на основе уровня вложенности. Это избавляет от необходимости создавать отдельные CSS правила для каждого уровня.

## Преимущества

### 1. Масштабируемость
- ✅ **Неограниченные уровни**: Система автоматически поддерживает любое количество уровней
- ✅ **Нет дублирования кода**: Один алгоритм для всех уровней
- ✅ **Легкое изменение**: Достаточно изменить параметры в одной функции

### 2. Простота поддержки
- ✅ **Один источник истины**: Все позиции рассчитываются в одном месте
- ✅ **Консистентность**: Гарантированно одинаковые отступы между уровнями
- ✅ **Отладка**: Легко изменить параметры для тестирования

## Техническая реализация

### JavaScript функция
```javascript
/**
 * Автоматически рассчитывает позицию горизонтальной линии на основе уровня вложенности
 * @param {number} level - Уровень вложенности (0-9)
 * @returns {number} - Позиция left в пикселях
 */
function calculateHorizontalLinePosition(level) {
    // Базовые параметры для расчета позиции
    const baseOffset = 7; // Базовое смещение для уровня 1
    const levelSpacing = 25; // Расстояние между уровнями
    const additionalOffset = 3; // Дополнительное смещение (как было в CSS)
    
    // Формула: базовое смещение + (уровень - 1) * расстояние между уровнями + дополнительное смещение
    return baseOffset + (level - 1) * levelSpacing + additionalOffset;
}
```

### Применение в коде
```javascript
// При создании горизонтальной линии
const horizontalLine = document.createElement('div');
horizontalLine.className = `tree-horizontal-line`;
horizontalLine.textContent = level;

// Автоматически рассчитываем позицию на основе уровня
const leftPosition = calculateHorizontalLinePosition(level);
horizontalLine.style.left = `${leftPosition}px`;

cell.appendChild(horizontalLine);
```

## Формула расчета

### Параметры:
- **baseOffset**: 7px (базовое смещение для уровня 1)
- **levelSpacing**: 25px (расстояние между уровнями)
- **additionalOffset**: 3px (дополнительное смещение)

### Формула:
```
position = baseOffset + (level - 1) * levelSpacing + additionalOffset
```

### Примеры расчетов:
- **Уровень 1**: 7 + (1-1) * 25 + 3 = **10px**
- **Уровень 2**: 7 + (2-1) * 25 + 3 = **35px**
- **Уровень 3**: 7 + (3-1) * 25 + 3 = **60px**
- **Уровень 4**: 7 + (4-1) * 25 + 3 = **85px**
- **Уровень 5**: 7 + (5-1) * 25 + 3 = **110px**

## Сравнение с предыдущим подходом

### Было (статический CSS):
```css
.level-1 .tree-horizontal-line { left: 7px; }
.level-2 .tree-horizontal-line { left: 32px; }
.level-3 .tree-horizontal-line { left: 57px; }
.level-4 .tree-horizontal-line { left: 82px; }
/* ... и так далее для каждого уровня */
```

### Стало (динамический JavaScript):
```javascript
// Один алгоритм для всех уровней
const leftPosition = calculateHorizontalLinePosition(level);
horizontalLine.style.left = `${leftPosition}px`;
```

## Настройка параметров

Для изменения внешнего вида достаточно изменить параметры в функции:

```javascript
function calculateHorizontalLinePosition(level) {
    const baseOffset = 10;        // Изменить базовое смещение
    const levelSpacing = 30;      // Изменить расстояние между уровнями
    const additionalOffset = 5;   // Изменить дополнительное смещение
    
    return baseOffset + (level - 1) * levelSpacing + additionalOffset;
}
```

## Совместимость

- ✅ **Работает с существующими уровнями**: 0-9
- ✅ **Поддерживает новые уровни**: 10, 11, 12... без изменений кода
- ✅ **Совместимо с динамическими элементами**: Работает при раскрытии/сворачивании
- ✅ **Производительность**: Минимальное влияние на производительность

## Результат

Теперь система автоматически поддерживает любое количество уровней вложенности без необходимости создания отдельных CSS правил. Это делает код более чистым, масштабируемым и легким в поддержке!
