# Инструкция по обновлению на сервере

## Коммит для обновления
**Коммит**: `2d7164b` - "feat: Улучшения интерфейса и очистка документации"

## Что изменилось
- ✅ Удалены 4 устаревших метода из ReferalController
- ✅ Удалены 4 устаревших маршрута из referal.routes.js  
- ✅ Удален дублирующий метод deleteReferal из ReferalService
- ✅ Добавлена кнопка обновления таблицы без перезагрузки
- ✅ Улучшена адаптивность интерфейса для мобильных устройств
- ✅ Вынесены CSS и JavaScript в отдельные файлы
- ✅ Удалено 33 устаревших .md файла документации
- ✅ Оптимизирована структура проекта

## Команды для обновления на сервере

### 1. Подключение к серверу
```bash
ssh user@your-server-ip
```

### 2. Переход в директорию проекта
```bash
cd /var/www/royalq-salebot
```

### 3. Получение обновлений
```bash
git pull origin main
```

### 4. Пересборка Docker контейнеров
```bash
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

### 5. Проверка статуса
```bash
docker-compose ps
docker-compose logs app
```

## Проверка работоспособности

### Основные эндпоинты для проверки:
- `GET /` - перенаправление на /network
- `GET /network` - новый интерфейс реферальной сети
- `GET /api/referrals/tree` - API дерева рефералов
- `GET /api/referrals/activity-stats` - API статистики

### Удаленные эндпоинты (больше не работают):
- ❌ `GET /dashboard/:refererId`
- ❌ `GET /table/:refererId`
- ❌ `GET /modern/:refererId`
- ❌ `GET /modern-table/:refererId`

## Откат (если нужен)
```bash
git reset --hard 73785bc
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## Статус
✅ Код очищен и готов к production
✅ Все устаревшие компоненты удалены
✅ Дублирования устранены
✅ Интерфейс улучшен и адаптивен
✅ Документация оптимизирована
✅ Приложение полностью готово к использованию
