# Документация по улучшенной визуализации реферального дерева

## Обзор

Данная документация описывает улучшения, внесенные в табличный вид реферального дерева для создания более наглядной и интерактивной древовидной структуры.

## Новые возможности

### 1. Улучшенные соединительные линии

- **Вертикальные линии**: Градиентные линии с тенями для лучшей видимости
- **Горизонтальные линии**: Анимированные соединительные линии между узлами
- **Соединительные узлы**: Круглые индикаторы в точках соединения
- **Корневой узел**: Специальный стиль для корневого элемента дерева

### 2. Визуальные индикаторы

- **Индикаторы дерева**: Иконки для узлов с дочерними элементами
- **Листовые индикаторы**: Иконки для конечных узлов
- **Счетчики детей**: Отображение количества дочерних элементов
- **Индикаторы глубины**: Цветовая маркировка по уровням

### 3. Анимации и эффекты

- **Плавное разворачивание**: Анимированное раскрытие узлов дерева
- **Эффекты наведения**: Интерактивные эффекты при наведении
- **Пульсация соединителей**: Анимированные соединительные узлы
- **Градиентные переходы**: Плавные цветовые переходы

### 4. Адаптивность

- **Мобильная оптимизация**: Уменьшенные размеры для мобильных устройств
- **Отзывчивый дизайн**: Адаптация под разные размеры экрана
- **Оптимизированные элементы**: Упрощенные элементы для малых экранов

### 5. Доступность

- **ARIA атрибуты**: Поддержка скрин-ридеров
- **Клавиатурная навигация**: Управление с клавиатуры
- **Семантическая разметка**: Правильная структура для доступности

## Технические детали

### CSS файлы

1. **table-style.css** - Основные стили таблицы
2. **tree-effects.css** - Специальные эффекты для дерева

### JavaScript функции

- `initializeTreeVisualization()` - Инициализация визуализации
- `addTreeStructureFeedback()` - Добавление обратной связи
- `addKeyboardNavigation()` - Клавиатурная навигация
- `handleTreeKeydown()` - Обработка клавиш

### HTML структура

```html
<td class="tree-cell level-{level}" 
    aria-level="{level}" 
    aria-expanded="false"
    role="treeitem"
    tabindex="0">
    <div class="tree-structure">
        <div class="tree-depth-marker level-{level}"></div>
        <div class="tree-lines">
            <!-- Соединительные линии -->
        </div>
        <div class="tree-controls">
            <!-- Элементы управления -->
        </div>
    </div>
</td>
```

## Клавиатурные сокращения

- **Enter/Space** - Развернуть/свернуть узел
- **Стрелка вправо** - Развернуть узел
- **Стрелка влево** - Свернуть узел
- **Стрелка вниз** - Перейти к следующему узлу
- **Стрелка вверх** - Перейти к предыдущему узлу

## Цветовая схема по уровням

- **Уровень 1**: Синий (#3b82f6)
- **Уровень 2**: Зеленый (#10b981)
- **Уровень 3**: Оранжевый (#f59e0b)
- **Уровень 4**: Красный (#ef4444)
- **Уровень 5**: Фиолетовый (#8b5cf6)

## Производительность

- Использование `will-change` для оптимизации анимаций
- `transform: translateZ(0)` для аппаратного ускорения
- `backface-visibility: hidden` для предотвращения мерцания

## Совместимость

- Поддержка современных браузеров
- Graceful degradation для старых браузеров
- Мобильная оптимизация для iOS и Android

## Настройка

Для изменения цветов или стилей отредактируйте CSS переменные в файле `table-style.css`:

```css
:root {
    --primary-color: #3b82f6;
    --primary-hover: #1d4ed8;
    --border: #e5e7eb;
}
```

## Отладка

Для отладки используйте браузерные инструменты разработчика:
1. Проверьте консоль на ошибки JavaScript
2. Убедитесь в правильной загрузке CSS файлов
3. Проверьте ARIA атрибуты в Elements панели


